{% extends "base_default.html" %}
{% block content %}
	<div id="threads" class="category rounded-lg overflow-hidden shadow-sm">
		<div class="header p-2 bg-theme text-white">Threads</div>
		<div class="body p-2 bg-light">
			{% for thread in threads %}
				<div class="category-item p-2 bg-white shadow-sm">
					<div class="category-icon">
							<i class="mdi mdi-chat-bubble-outline"></i>
					</div>
					<div class="category-display">
						<div class="category-display-title">
							<a href="{{ url_for('messages.list', topic_id=topic.id, thread_id=thread.id) }}">
								{{ thread.title }}
							</a>
						</div>
					</div>
					<div class="category-metrics">
						<div class="category-metrics-item">
							<span>{{ thread.total_messages() }}</span>
							<label>Messages</label>
						</div>
					</div>
					<div class="category-latest-message">
						{% set message = thread.latest_message() %}
						{% if message %}
							<div class="category-latest-message-username">
								by <a href="#">{{ message.user.username }}</a>
							</div>
							<div class="category-latest-message-timestamp" data-timestamp="{{ message.created_at }}"></div>
						{% else %}
							<div>No messages</div>
						{% endif %}
					</div>
					{% if user %}
					<div class="category-actions"></div>
					{% endif %}
				</div>
			{% endfor %}
		</div>
	</div>
	{% if user %}
		<a href="{{ url_for('threads.create', topic_id=topic.id) }}">New Thread</a>
	{% endif %}
{% endblock %}